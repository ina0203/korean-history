<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>역사 수호대: 타임 리프</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #e67e22;
            --success: #27ae60;
            --danger: #e74c3c;
            --bg: #f5f7fa;
            --card-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* ============ 네비게이션 ============ */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            background: white;
            color: var(--primary);
            cursor: pointer;
            font-weight: bold;
            box-shadow: var(--card-shadow);
            transition: all 0.3s;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .nav-btn.back {
            background: var(--primary);
            color: white;
        }

        /* ============ 배경 설명 섹션 ============ */
        .background-section {
            background: white;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
            overflow: hidden;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .background-header {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5em;
            position: relative;
            overflow: hidden;
        }

        .background-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0,0,0,0.1), rgba(0,0,0,0.2));
            pointer-events: none;
        }

        .background-header span {
            position: relative;
            z-index: 1;
        }

        .background-content {
            padding: 40px;
        }

        .background-title {
            font-size: 2.5em;
            color: var(--primary);
            margin-bottom: 20px;
            border-bottom: 3px solid var(--accent);
            padding-bottom: 15px;
        }

        .background-description {
            font-size: 1.1em;
            line-height: 1.8;
            color: #555;
            margin-bottom: 25px;
        }

        .highlight-box {
            background: linear-gradient(135deg, rgba(230, 126, 34, 0.1), rgba(230, 126, 34, 0.05));
            border-left: 4px solid var(--accent);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .highlight-box h4 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .highlight-box ul {
            list-style-position: inside;
            color: #666;
            line-height: 1.8;
        }

        .highlight-box li {
            margin-bottom: 8px;
        }

        /* ============ 진행도 바 ============ */
        .progress-bar-container {
            margin: 30px 0;
            background: #eee;
            height: 40px;
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            align-items: center;
            position: relative;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), #d35400);
            width: 0%;
            transition: width 0.5s ease-out;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 15px;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }

        .progress-text {
            position: absolute;
            left: 15px;
            font-weight: bold;
            color: var(--primary);
            z-index: 10;
        }

        /* ============ 퀴즈 섹션 ============ */
        .quiz-section {
            background: white;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            padding: 40px;
            margin-bottom: 30px;
            display: none;
        }

        .quiz-section.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .quiz-number {
            font-size: 1.2em;
            color: var(--accent);
            font-weight: bold;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .difficulty-elementary {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-middle {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-high {
            background: #f8d7da;
            color: #721c24;
        }

        .question-text {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option-btn {
            padding: 20px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.05em;
            transition: all 0.3s;
            text-align: left;
            line-height: 1.6;
            min-height: 100px;
            display: flex;
            align-items: center;
        }

        .option-btn:hover:not(:disabled) {
            background: #f9f9f9;
            border-color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(230, 126, 34, 0.2);
        }

        .option-btn:disabled {
            cursor: not-allowed;
        }

        .option-btn.correct {
            background: #d4edda;
            border-color: var(--success);
            color: #155724;
        }

        .option-btn.incorrect {
            background: #f8d7da;
            border-color: var(--danger);
            color: #721c24;
        }

        /* ============ 피드백 섹션 ============ */
        .feedback-section {
            display: none;
            margin-bottom: 25px;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid;
            animation: slideUp 0.4s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback-section.show {
            display: block;
        }

        .feedback-section.correct {
            background: #d4edda;
            border-color: var(--success);
        }

        .feedback-section.incorrect {
            background: #f8d7da;
            border-color: var(--danger);
        }

        .feedback-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .feedback-section.correct .feedback-title {
            color: #155724;
        }

        .feedback-section.incorrect .feedback-title {
            color: #721c24;
        }

        .feedback-explanation {
            font-size: 1.05em;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .feedback-section.correct .feedback-explanation {
            color: #0c5e1d;
        }

        .feedback-section.incorrect .feedback-explanation {
            color: #5a1e1e;
        }

        .correct-answer {
            background: rgba(255, 255, 255, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-weight: bold;
        }

        /* ============ 버튼 ============ */
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.05em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: none;
        }

        .btn.show {
            display: inline-block;
        }

        .btn-next {
            background: var(--accent);
            color: white;
        }

        .btn-next:hover {
            background: #d35400;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(230, 126, 34, 0.3);
        }

        .btn-home {
            background: var(--primary);
            color: white;
        }

        .btn-home:hover {
            background: #1a252f;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        /* ============ 완료 화면 ============ */
        .completion-screen {
            background: white;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            padding: 60px 40px;
            text-align: center;
            display: none;
        }

        .completion-screen.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .completion-badge {
            font-size: 6em;
            margin: 20px 0;
            animation: bounce 0.6s ease-out;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .completion-screen h2 {
            font-size: 2.5em;
            color: var(--success);
            margin-bottom: 15px;
        }

        .completion-score {
            font-size: 2em;
            color: var(--accent);
            margin: 20px 0;
            font-weight: bold;
        }

        .completion-message {
            font-size: 1.2em;
            color: #666;
            margin: 20px 0;
            line-height: 1.8;
        }

        .chart-container {
            margin: 40px 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ============ 반응형 ============ */
        @media (max-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr;
            }

            .background-title {
                font-size: 1.8em;
            }

            .question-text {
                font-size: 1.2em;
            }

            .background-header {
                height: 150px;
                font-size: 3em;
            }

            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            nav {
                flex-direction: column;
                gap: 10px;
            }

            .nav-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <nav>
        <button class="nav-btn back" onclick="goHome()">← 홈으로</button>
        <div style="font-weight: bold; color: var(--primary); font-size: 1.1em;" id="nav-title">시대 선택</div>
        <button class="nav-btn" onclick="resetEra()" style="background: #f8d7da; color: #721c24;">🔄 초기화</button>
    </nav>

    <!-- 배경 설명 섹션 -->
    <div class="background-section" id="background-section">
        <div class="background-header" id="background-emoji">🪨</div>
        <div class="background-content">
            <div class="background-title" id="background-title">선사시대</div>
            <div class="background-description" id="background-desc">
                배경 설명을 불러오는 중...
            </div>
            <div class="highlight-box">
                <h4>📚 핵심 포인트</h4>
                <ul id="highlight-list">
                    <li>로딩 중...</li>
                </ul>
            </div>
            <div class="progress-bar-container">
                <div class="progress-text">진행도</div>
                <div class="progress-bar-fill" id="progress-bar" style="width: 0%;">
                    <span id="progress-text">0/20</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 퀴즈 섹션 -->
    <div class="quiz-section" id="quiz-section">
        <div class="quiz-header">
            <div>
                <div class="quiz-number" id="quiz-number">문제 1/20</div>
            </div>
            <div class="difficulty-badge" id="difficulty-badge">초등</div>
        </div>

        <div class="question-text" id="question-text">문제를 불러오는 중...</div>

        <div class="options-grid" id="options-grid"></div>

        <div class="feedback-section" id="feedback-section">
            <div class="feedback-title" id="feedback-title">피드백</div>
            <div class="feedback-explanation" id="feedback-explanation">설명</div>
            <div class="correct-answer" id="correct-answer" style="display: none;"></div>
        </div>

        <div class="button-group">
            <button class="btn btn-next" id="next-btn" onclick="nextQuestion()">다음 문제 →</button>
            <button class="btn btn-home" id="complete-btn" onclick="goHome()">완료!</button>
        </div>
    </div>

    <!-- 완료 화면 -->
    <div class="completion-screen" id="completion-screen">
        <div class="completion-badge">🎉</div>
        <h2 id="completion-title">시대 학습 완료!</h2>
        <div class="completion-score" id="completion-score">18/20 (90%)</div>
        <div class="completion-message" id="completion-message">
            정말 잘했어요! 이제 다음 시대를 배워보세요!
        </div>
        <div class="chart-container" id="chart-container" style="display: none;">
            <h3 style="margin-bottom: 20px; color: var(--primary);">📊 학습 성장</h3>
            <canvas id="growthChart"></canvas>
        </div>
        <div class="button-group" style="justify-content: center;">
            <button class="btn show btn-home" onclick="goHome()">🏠 홈으로 돌아가기</button>
        </div>
    </div>
</div>

<script>
    // ========== 시대별 배경 데이터 ==========
    const eraData = {
        sonsahui: {
            name: "선사시대",
            emoji: "🪨",
            color: "linear-gradient(135deg, #8B4513 0%, #D2691E 100%)",
            description: "선사시대는 인류가 처음 이 땅에 발을 디딘 때부터 문자가 나타나기 전까지의 시대입니다. 구석기 시대의 사냥꾼들은 주먹도끼를 만들어 사용했고, 신석기 시대가 되면서 농경이 시작되어 인류 문명의 새로운 장을 열었습니다.",
            highlights: [
                "구석기 시대: 주먹도끼를 도구로 사냥과 채집으로 생활",
                "신석기 시대: 농경의 시작, 빗살무늬토기 제작",
                "청동기 시대: 금속 도구 사용, 사회 계층화 시작",
                "한반도 최초의 정착촌 형성"
            ],
            questions: [
                {level: "elementary", q: "우리 역사에서 가장 먼저 시작된 시대는?", opts: ["고조선", "구석기", "신석기", "청동기"], ans: 1, exp: "구석기 시대가 우리 역사 중 가장 오래된 시대입니다."},
                {level: "elementary", q: "구석기 시대 사람들이 사냥할 때 사용한 도구는?", opts: ["주먹도끼", "빗살무늬토기", "청동거울", "비파형동검"], ans: 0, exp: "구석기 시대의 대표 도구는 주먹도끼입니다."},
                {level: "elementary", q: "신석기 시대 사람들이 음식을 저장하기 위해 만든 그릇은?", opts: ["청자", "백자", "빗살무늬토기", "질그릇"], ans: 2, exp: "빗살무늬토기는 신석기 시대의 특징적인 토기입니다."},
                {level: "elementary", q: "신석기 시대의 가장 큰 특징은?", opts: ["도구의 크기", "농경의 시작", "건물의 모양", "옷의 색깔"], ans: 1, exp: "신석기 시대의 가장 큰 특징은 농경이 시작되었다는 것입니다."},
                {level: "elementary", q: "구석기 시대 사람들의 생활 방식은?", opts: ["농사", "사냥과 채집", "상업", "공업"], ans: 1, exp: "구석기 시대 사람들은 사냥과 채집으로 생활했습니다."},
                {level: "middle", q: "구석기 시대와 신석기 시대를 구분하는 가장 중요한 요소는?", opts: ["도구의 재료", "거주지의 위치", "농경의 시작", "종교의 형태"], ans: 2, exp: "농경의 시작이 신석기 시대의 정의적 특징입니다."},
                {level: "middle", q: "한반도 신석기 문화의 특징을 가장 잘 나타내는 것은?", opts: ["빗살무늬토기", "주먹도끼", "청동거울", "철기 도구"], ans: 0, exp: "빗살무늬토기는 한반도 신석기 문화의 독특한 특징입니다."},
                {level: "middle", q: "청동기 시대에 등장한 도구는?", opts: ["주먹도끼", "청동 거울", "철제 칼", "석기 화살"], ans: 1, exp: "청동기 시대에는 청동으로 만든 거울이 등장했습니다."},
                {level: "high", q: "한반도 신석기 문화가 중국의 영향을 받지 않고 독자적으로 발전했음을 보여주는 증거는?", opts: ["빗살무늬토기의 독특한 형태", "주거 구조의 차이", "도구의 다양성", "종교 신앙체계"], ans: 0, exp: "빗살무늬토기는 중국과 다른 한반도 고유의 특징입니다."},
                {level: "high", q: "신석기에서 청동기로 넘어가는 과정에서 가장 큰 변화는?", opts: ["도시의 형성", "생산 경제로의 전환", "국가의 수립", "문자의 발명"], ans: 1, exp: "농경의 시작으로 인해 생산 경제가 형성되었습니다."},
                {level: "elementary", q: "청동기 시대는 언제부터 시작되었나?", opts: ["기원전 3000년", "기원전 2000년", "기원전 1000년", "기원전 500년"], ans: 2, exp: "한반도 청동기 시대는 기원전 1000년 경부터 시작되었습니다."},
                {level: "elementary", q: "신석기 시대 사람들이 살았던 집의 형태는?", opts: ["나무로 만든 집", "움집", "돌로 만든 집", "진흙 집"], ans: 1, exp: "신석기 시대 사람들은 움집에서 살았습니다."},
                {level: "middle", q: "청동기 시대의 가장 중요한 유물은?", opts: ["빗살무늬토기", "거울", "대칭 문양의 토기", "석기 도구"], ans: 2, exp: "청동기 시대에는 대칭 문양의 토기가 만들어졌습니다."},
                {level: "middle", q: "신석기 시대에 주로 재배한 곡물은?", opts: ["쌀", "보리", "조", "밀"], ans: 0, exp: "한반도 신석기 시대에는 쌀을 주로 재배했습니다."},
                {level: "high", q: "청동기 시대 사회의 계층 분화를 증명하는 유물은?", opts: ["각종 청동 도구", "움집", "무덤의 규모와 부장품의 차이", "토기의 모양"], ans: 2, exp: "무덤의 규모와 부장품의 차이는 사회 계층화의 증거입니다."},
                {level: "high", q: "한반도의 신석기 문화만의 독특한 특징은?", opts: ["농경 사회의 형성", "빗살무늬토기", "움집의 사용", "도구의 다양성"], ans: 1, exp: "빗살무늬토기는 한반도에서만 발견되는 고유한 문화유산입니다."},
                {level: "elementary", q: "구석기 시대의 가장 오래된 유물은?", opts: ["주먹도끼", "반달 돌칼", "어골", "화살촉"], ans: 0, exp: "주먹도끼는 구석기 시대의 가장 오래된 유물입니다."},
                {level: "middle", q: "구석기와 신석기 도구의 가장 큰 변화는?", opts: ["크기의 증가", "정교함과 다양성의 증가", "무게의 감소", "색상의 변화"], ans: 1, exp: "신석기 도구는 더욱 정교하고 다양해졌습니다."},
                {level: "high", q: "한반도 청동기 문화의 형성에 가장 큰 영향을 미친 요소는?", opts: ["남중국의 문화", "중국 황허 문명", "시베리아 유목민 문화", "동남아시아 문화"], ans: 2, exp: "시베리아 유목민의 청동기 문화가 한반도에 전래되었습니다."},
                {level: "elementary", q: "신석기 시대에 가축으로 기르지 않은 동물은?", opts: ["돼지", "개", "소", "호랑이"], ans: 3, exp: "호랑이는 신석기 시대에 가축으로 길들여지지 않았습니다."}
            ]
        },
        gojoseon: {
            name: "고조선",
            emoji: "👑",
            color: "linear-gradient(135deg, #D4AF37 0%, #FFD700 100%)",
            description: "고조선은 우리 민족 최초의 국가입니다. 단군왕검에 의해 기원전 2333년에 건국되어 약 2000년 동안 존속했습니다. 고조선의 8조법은 우리 역사에서 처음으로 성문법을 제정한 것으로, 법치주의의 토대를 마련했습니다.",
            highlights: [
                "우리 민족 최초의 국가 (기원전 2333년 건국)",
                "8조법: 법치주의의 기초",
                "수도는 아사달(현재의 평양)",
                "만주와 한반도 일부를 영토로 함",
                "기원전 108년 한나라 침입으로 멸망"
            ],
            questions: [
                {level: "elementary", q: "우리 민족 최초의 국가 고조선을 세운 사람은?", opts: ["광개토대왕", "단군왕검", "왕건", "이성계"], ans: 1, exp: "고조선을 건국한 사람은 단군왕검입니다."},
                {level: "elementary", q: "고조선이 건국된 연도는?", opts: ["기원전 2333년", "기원전 1000년", "기원전 108년", "기원 100년"], ans: 0, exp: "고조선은 기원전 2333년에 건국되었습니다."},
                {level: "elementary", q: "고조선의 수도는?", opts: ["평양", "한양", "경주", "개경"], ans: 0, exp: "고조선의 수도는 평양(아사달)입니다."},
                {level: "elementary", q: "고조선의 8조법이 보여주는 것은?", opts: ["단순한 부족 공동체", "법치주의 확립", "무력 정권", "농업 사회"], ans: 1, exp: "8조법은 고조선이 법치주의 국가임을 보여줍니다."},
                {level: "elementary", q: "고조선의 건국 신화에서 나오는 신은?", opts: ["하느님", "환인", "단월", "강신"], ans: 1, exp: "환인은 고조선 건국 신화에 나오는 신입니다."},
                {level: "middle", q: "고조선이 멸망한 연도는?", opts: ["기원전 108년", "기원전 50년", "기원 100년", "기원 200년"], ans: 0, exp: "고조선은 기원전 108년에 멸망했습니다."},
                {level: "middle", q: "고조선이 멸망한 원인은?", opts: ["내부 반란", "한나라의 침입", "자연재해", "경제적 파산"], ans: 1, exp: "고조선은 한나라의 침입으로 멸망했습니다."},
                {level: "middle", q: "고조선 초기 건국자 단군에 대한 설명 중 맞는 것은?", opts: ["중국에서 온 사람", "한반도 원주민의 지도자", "서방 유목민의 지도자", "동남아시아의 지도자"], ans: 1, exp: "단군은 한반도 원주민 지도자들을 통합한 인물입니다."},
                {level: "middle", q: "고조선 시대의 통치 체제는?", opts: ["민주주의", "왕권 중심 체제", "귀족 중심 체제", "종교 중심 체제"], ans: 1, exp: "고조선은 왕권 중심의 체제를 가지고 있었습니다."},
                {level: "high", q: "고조선의 역사적 의의를 가장 포괄적으로 설명한 것은?", opts: ["동아시아 최초의 국가", "한민족 최초의 통일 국가로서 법치주의 토대 마련", "세계 최고의 문명", "단순한 부족 연합체"], ans: 1, exp: "고조선은 한민족 최초의 국가이면서 법치주의를 확립했습니다."},
                {level: "high", q: "고조선의 문화적 특징은?", opts: ["중국 문화의 완전한 복제", "한반도 고유의 청동기 문화와 중국 문화의 융합", "순수 한반도 문화만의 존재", "서방 문화의 전수"], ans: 1, exp: "고조선 문화는 한반도 고유문화와 중국 문화의 융합입니다."},
                {level: "elementary", q: "고조선의 사회 계급 중 가장 높은 지위는?", opts: ["왕", "귀족", "평민", "노예"], ans: 0, exp: "왕은 고조선 사회에서 가장 높은 지위입니다."},
                {level: "elementary", q: "고조선에서 가장 발달한 산업은?", opts: ["상업", "농업", "어업", "공업"], ans: 1, exp: "고조선은 농업을 기반으로 한 사회였습니다."},
                {level: "middle", q: "고조선 멸망 후 한반도에 등장한 새로운 국가들은?", opts: ["삼국", "남북국", "여러 소국가", "중국의 행정 구역"], ans: 2, exp: "고조선 멸망 후 여러 소국가들이 한반도에 등장했습니다."},
                {level: "middle", q: "고조선의 8조법의 내용 중 가장 중요한 특징은?", opts: ["엄격한 형벌", "모든 국민이 따르는 법", "왕만을 위한 법", "귀족을 위한 법"], ans: 1, exp: "8조법은 모든 국민이 따르는 통일된 법을 제시했습니다."},
                {level: "high", q: "고조선이 한민족 역사에서 가지는 의미는?", opts: ["단순한 신화", "한민족의 시작점으로서의 정치·문화적 상징", "중국의 식민지", "임시 정권"], ans: 1, exp: "고조선은 한민족의 시작점으로서 정치·문화적 상징입니다."},
                {level: "high", q: "단군 신화의 역사적 해석으로 가장 타당한 것은?", opts: ["역사적 사실의 정확한 기록", "한민족의 기원과 이상을 담은 상징적 표현", "중국 신화의 모방", "종교적 허구"], ans: 1, exp: "단군 신화는 한민족의 기원과 이상을 담은 상징입니다."},
                {level: "elementary", q: "고조선 시대 사람들의 주요 종교는?", opts: ["불교", "도교", "샤머니즘", "기독교"], ans: 2, exp: "고조선 시대에는 샤머니즘이 주요 종교였습니다."},
                {level: "middle", q: "고조선의 영토 범위는?", opts: ["현재의 한반도만", "만주와 한반도의 일부", "중국 전체", "동아시아 전체"], ans: 1, exp: "고조선의 영토는 만주와 한반도의 일부를 포함했습니다."},
                {level: "high", q: "고조선의 정치 체제가 중국과 다른 점은?", opts: ["더 왕권이 강했다", "순수한 한민족 체제였다", "법치주의를 더 일찍 실현했다", "민주적이었다"], ans: 2, exp: "고조선은 8조법으로 법치주의를 일찍 실현했습니다."}
            ]
        },
        // 추가 시대들...
        samguk: {
            name: "삼국시대",
            emoji: "⚔️",
            color: "linear-gradient(135deg, #8B0000 0%, #DC143C 100%)",
            description: "삼국시대는 한반도의 역사에서 가장 역동적인 시대입니다. 고구려, 백제, 신라가 한반도의 패권을 놓고 벌인 약 700년의 경쟁은 한민족 문화의 발전과 신라의 삼국통일로 이어졌습니다.",
            highlights: [
                "세 나라의 건국: 고구려(37년), 백제(18년), 신라(57년)",
                "4세기 백제의 전성기: 근초고왕 시대",
                "5-6세기 고구려의 전성기: 광개토대왕, 장수왕",
                "신라의 삼국통일: 676년 완성",
                "삼국의 문화 발전: 불교 수용과 예술 발달"
            ],
            questions: [
                {level: "elementary", q: "삼국시대의 세 나라는?", opts: ["고조선, 발해, 신라", "고구려, 백제, 신라", "고구려, 고려, 신라", "백제, 신라, 가야"], ans: 1, exp: "삼국시대의 세 나라는 고구려, 백제, 신라입니다."},
                {level: "elementary", q: "삼국 중 가장 먼저 건국된 나라는?", opts: ["백제", "신라", "고구려", "가야"], ans: 2, exp: "고구려가 삼국 중 가장 먼저 건국된 나라입니다."},
                {level: "elementary", q: "고구려를 건국한 사람은?", opts: ["주몽", "온조", "박혁거세", "김수로"], ans: 0, exp: "고구려는 주몽이 건국했습니다."},
                {level: "elementary", q: "백제를 건국한 사람은?", opts: ["주몽", "온조", "박혁거세", "김수로"], ans: 1, exp: "백제는 온조가 건국했습니다."},
                {level: "elementary", q: "신라를 건국한 사람은?", opts: ["주몽", "온조", "박혁거세", "김수로"], ans: 2, exp: "신라는 박혁거세가 건국했습니다."},
                {level: "middle", q: "4세기 백제의 전성기를 이끈 왕은?", opts: ["근초고왕", "세종대왕", "진흥왕", "문무왕"], ans: 0, exp: "백제의 4세기 전성기는 근초고왕 때입니다."},
                {level: "middle", q: "신라의 삼국통일을 이룬 왕은?", opts: ["문무왕", "성덕왕", "신문왕", "경덕왕"], ans: 0, exp: "신라의 삼국통일을 이룬 왕은 문무왕입니다."},
                {level: "middle", q: "삼국 중 가장 늦게 통일을 이룬 나라는?", opts: ["고구려", "백제", "신라", "가야"], ans: 2, exp: "신라가 가장 늦게 건국되었지만 가장 마지막에 통일을 이루었습니다."},
                {level: "high", q: "삼국시대 전성기 순서를 올바르게 나열한 것은?", opts: ["고구려→백제→신라", "백제→고구려→신라", "신라→백제→고구려", "고구려→신라→백제"], ans: 1, exp: "시간 순서상 백제→고구려→신라 순으로 각각 전성기를 맞이했습니다."},
                {level: "high", q: "삼국이 한반도에서 경쟁하는 과정에서 가장 중요한 변수는?", opts: ["종교", "경제", "군사력과 외교", "문화"], ans: 2, exp: "군사력과 외교가 삼국 경쟁의 가장 중요한 변수였습니다."},
                {level: "elementary", q: "고구려의 위치는?", opts: ["한반도 중부", "한반도 남부", "한반도 북부와 만주", "한반도 동부"], ans: 2, exp: "고구려는 한반도 북부와 만주에 위치했습니다."},
                {level: "elementary", q: "백제의 위치는?", opts: ["한반도 중부", "한반도 남서부", "한반도 북부", "한반도 동부"], ans: 1, exp: "백제는 한반도 남서부에 위치했습니다."},
                {level: "elementary", q: "신라의 위치는?", opts: ["한반도 중부", "한반도 남서부", "한반도 북부", "한반도 남동부"], ans: 3, exp: "신라는 한반도 남동부에 위치했습니다."},
                {level: "middle", q: "삼국 중 가장 오래 존속한 나라는?", opts: ["고구려", "백제", "신라", "모두 같음"], ans: 2, exp: "신라는 삼국 중 가장 오래 존속했습니다."},
                {level: "middle", q: "고구려가 멸망한 연도는?", opts: ["668년", "660년", "676년", "935년"], ans: 0, exp: "고구려는 668년에 당나라에 멸망했습니다."},
                {level: "middle", q: "백제가 멸망한 연도는?", opts: ["668년", "660년", "676년", "935년"], ans: 1, exp: "백제는 660년에 당나라에 멸망했습니다."},
                {level: "high", q: "삼국통일의 완성을 의미하는 연도는?", opts: ["660년", "668년", "676년", "700년"], ans: 2, exp: "676년에 신라가 삼국통일을 완성했습니다."},
                {level: "high", q: "신라의 삼국통일이 완전한 통일이 아닌 이유는?", opts: ["거란의 영토를 포함하지 못함", "만주의 일부가 여전히 독립", "일본의 영토가 한반도에 있었음", "러시아의 영토 때문"], ans: 1, exp: "만주의 일부가 여전히 독립된 지역으로 남아있었습니다."},
                {level: "elementary", q: "삼국시대에 신라가 마지막에 통일할 수 있었던 가장 큰 이유는?", opts: ["가장 오래된 나라", "당나라의 지원", "가장 강한 군사력", "지리적 이점"], ans: 1, exp: "신라가 당나라의 지원을 받아 통일할 수 있었습니다."}
            ]
        },
        nambukguk: {
            name: "남북국시대",
            emoji: "🌊",
            color: "linear-gradient(135deg, #4169E1 0%, #87CEEB 100%)",
            description: "남북국시대는 신라와 발해가 한반도를 나누어 통치한 약 300년간의 시대입니다. 신라는 한반도 남부에서 불교 문화를 꽃피웠고, 발해는 만주와 한반도 북부에서 강성해졌습니다.",
            highlights: [
                "발해의 건국: 대조영, 698년",
                "신라 불교 문화의 절정: 석굴암, 불국사, 팔만대장경",
                "신라 골품제의 발전과 귀족 정치",
                "발해의 영토 확장: 8세기 전성기",
                "신라 하대의 진골귀족 중심의 정치 체제"
            ],
            questions: [
                {level: "elementary", q: "발해를 건국한 사람은?", opts: ["단군왕검", "광개토대왕", "대조영", "왕건"], ans: 2, exp: "발해는 대조영이 건국했습니다."},
                {level: "elementary", q: "발해가 건국된 연도는?", opts: ["668년", "676년", "698년", "926년"], ans: 2, exp: "발해는 698년에 건국되었습니다."},
                {level: "elementary", q: "발해의 위치는?", opts: ["한반도 북부", "만주", "한반도와 만주", "시베리아"], ans: 2, exp: "발해는 한반도 북부와 만주에 위치했습니다."},
                {level: "elementary", q: "석굴암이 있는 곳은?", opts: ["불국사 옆", "경주 토함산", "해인사", "팔만대장경 보관소"], ans: 1, exp: "석굴암은 경주 토함산에 위치합니다."},
                {level: "elementary", q: "불국사는 누가 세웠나?", opts: ["문무왕", "신문왕", "경덕왕", "혜공왕"], ans: 2, exp: "불국사는 경덕왕이 세웠습니다."},
                {level: "middle", q: "석굴암의 본존불은 무엇으로 만들어졌나?", opts: ["나무", "금", "돌", "흙"], ans: 2, exp: "석굴암의 본존불은 화강암으로 조각되었습니다."},
                {level: "middle", q: "신라의 불교 문화가 가장 발달한 시대는?", opts: ["삼국시대", "남북국시대", "고려시대", "조선시대"], ans: 1, exp: "신라의 불교 문화는 남북국시대에 가장 발달했습니다."},
                {level: "high", q: "석굴암이 유네스코 세계유산으로 인정받은 이유는?", opts: ["크기가 크다", "수학적·과학적 설계와 1300년 보존", "돈이 많이 들었다", "아름다운 조각상"], ans: 1, exp: "석굴암은 뛰어난 기하학적 설계와 천 년 이상의 보존으로 평가받습니다."},
                {level: "high", q: "신라의 팔만대장경 제작이 보여주는 것은?", opts: ["종교의 쇠퇴", "국력의 소모", "높은 수공업 기술과 종교 신앙", "중국의 영향"], ans: 2, exp: "팔만대장경은 신라의 높은 기술과 신앙을 보여줍니다."},
                {level: "elementary", q: "발해의 멸망 연도는?", opts: ["926년", "935년", "945년", "1000년"], ans: 0, exp: "발해는 926년에 거란에 의해 멸망했습니다."},
                {level: "elementary", q: "남북국시대에서 '남'은 어느 나라를 의미하나?", opts: ["신라", "백제", "고구려", "가야"], ans: 0, exp: "'남'은 신라를 의미합니다."},
                {level: "elementary", q: "남북국시대에서 '북'은 어느 나라를 의미하나?", opts: ["신라", "백제", "고구려", "발해"], ans: 3, exp: "'북'은 발해를 의미합니다."},
                {level: "middle", q: "발해의 가장 큰 영토를 가진 시대는?", opts: ["건국초기", "8세기", "9세기", "10세기"], ans: 1, exp: "발해는 8세기에 가장 큰 영토를 가졌습니다."},
                {level: "middle", q: "신라가 당나라와 관계를 끝낸 시기는?", opts: ["8세기", "9세기", "10세기", "11세기"], ans: 0, exp: "신라는 8세기 경에 당나라와의 관계를 정리했습니다."},
                {level: "middle", q: "발해가 당나라와 경쟁했던 주요 지역은?", opts: ["한반도", "일본", "만주 지역", "시베리아"], ans: 2, exp: "발해는 만주 지역에서 당나라와 경쟁했습니다."},
                {level: "high", q: "남북국시대의 역사적 의의는?", opts: ["신라의 쇠퇴", "한반도와 만주 지역의 독립적 발전", "중국의 영향 확대", "야만문화의 번성"], ans: 1, exp: "남북국시대는 한반도와 만주의 독립적 발전을 의미합니다."},
                {level: "high", q: "신라 하대로 접어들면서 나타난 가장 큰 문제는?", opts: ["외침", "기근", "귀족의 분권화와 지방의 반란", "종교 분열"], ans: 2, exp: "신라 하대에는 귀족의 분권화와 지방 반란이 심각했습니다."},
                {level: "middle", q: "신라가 멸망한 연도는?", opts: ["888년", "900년", "920년", "935년"], ans: 3, exp: "신라는 935년에 고려에 의해 멸망했습니다."},
                {level: "high", q: "신라에서 발해로의 이동 인구가 보여주는 것은?", opts: ["고려의 부상", "거란의 위협", "발해의 정치적 안정성", "당나라의 영향"], ans: 2, exp: "신라에서 발해로의 이동은 발해의 정치적 안정성을 보여줍니다."}
            ]
        },
        goryeo: {
            name: "고려",
            emoji: "🌿",
            color: "linear-gradient(135deg, #228B22 0%, #32CD32 100%)",
            description: "고려는 신라를 멸망시키고 한반도를 통일한 나라입니다. 약 500년간 존속한 고려는 팔만대장경과 고려청자라는 불후의 문화유산을 남겼습니다. 특히 팔만대장경은 세계에서 가장 정교한 목판 인쇄문화의 결정체입니다.",
            highlights: [
                "왕건이 935년 건국, 신라 통일",
                "고려청자: 옅은 푸른색의 비색이 특징",
                "팔만대장경: 거란의 침입을 막기 위해 제작",
                "거란(요)과의 전쟁: 서희의 귀주대첩",
                "귀족 중심의 정치 체제"
            ],
            questions: [
                {level: "elementary", q: "고려를 건국한 사람은?", opts: ["단군왕검", "이성계", "왕건", "광개토대왕"], ans: 2, exp: "고려는 왕건이 건국했습니다."},
                {level: "elementary", q: "고려가 건국된 연도는?", opts: ["850년", "900년", "918년", "945년"], ans: 2, exp: "고려는 918년에 건국되었습니다."},
                {level: "elementary", q: "고려청자의 색깔은?", opts: ["흰색", "검은색", "옅은 푸른색", "붉은색"], ans: 2, exp: "고려청자의 특징은 옅은 푸른색(비색)입니다."},
                {level: "elementary", q: "팔만대장경이 무엇으로 만들어졌나?", opts: ["종이", "나무판", "돌", "나뭇잎"], ans: 1, exp: "팔만대장경은 약 80,000장의 나무판으로 만들어졌습니다."},
                {level: "elementary", q: "팔만대장경이 보관된 곳은?", opts: ["불국사", "해인사", "팔만사", "경주 박물관"], ans: 1, exp: "팔만대장경은 해인사에 보관되어 있습니다."},
                {level: "middle", q: "팔만대장경의 제작 이유는?", opts: ["종교 신앙", "거란의 침입 대비", "국력 과시", "외교 선물"], ans: 1, exp: "팔만대장경은 거란의 침입을 막기 위해 만들어졌습니다."},
                {level: "middle", q: "팔만대장경의 제작 기간은?", opts: ["약 30년", "약 50년", "약 75년", "약 100년"], ans: 2, exp: "팔만대장경은 약 75년에 걸쳐 제작되었습니다."},
                {level: "middle", q: "고려청자가 만들어진 시대는?", opts: ["8세기", "9세기", "10-12세기", "13-14세기"], ans: 2, exp: "고려청자는 10-12세기에 만들어졌습니다."},
                {level: "high", q: "고려청자의 기술적 특징은?", opts: ["중국의 모방", "고유한 제작 기법과 색상", "단순한 도자기", "낮은 기술력"], ans: 1, exp: "고려청자는 고유한 제작 기법과 비색이 특징입니다."},
                {level: "elementary", q: "고려의 수도는?", opts: ["한양", "경주", "개경", "평양"], ans: 2, exp: "고려의 수도는 개경(현재의 개경/서울)입니다."},
                {level: "elementary", q: "거란은 어디에서 온 민족인가?", opts: ["중국", "만주", "몽골", "시베리아"], ans: 1, exp: "거란은 만주에서 온 민족입니다."},
                {level: "middle", q: "서희의 귀주대첩이 일어난 시기는?", opts: ["993년", "1000년", "1019년", "1100년"], ans: 0, exp: "서희의 귀주대첩은 993년에 일어났습니다."},
                {level: "middle", q: "거란과의 전쟁 중 서희의 역할은?", opts: ["군인", "외교관", "무술가", "시인"], ans: 1, exp: "서희는 외교관으로서 활약했습니다."},
                {level: "high", q: "고려가 거란(요)과의 관계를 정리한 시기는?", opts: ["10세기", "11세기", "12세기", "13세기"], ans: 0, exp: "고려는 10세기에 거란(요)과의 관계를 정리했습니다."},
                {level: "elementary", q: "고려의 건국 이념은?", opts: ["유교", "불교", "도교", "신교"], ans: 1, exp: "고려는 불교를 건국 이념으로 삼았습니다."},
                {level: "middle", q: "고려의 귀족 정치의 특징은?", opts: ["왕권 강화", "귀족의 권력 독점", "민주주의", "종교 통치"], ans: 1, exp: "고려의 귀족 정치는 귀족의 권력 독점이 특징입니다."},
                {level: "high", q: "고려의 귀족 정치가 국력 약화로 이어진 이유는?", opts: ["전쟁의 과다", "외국 침략", "왕권과 귀족권의 갈등", "자연재해"], ans: 2, exp: "왕권과 귀족권의 갈등이 국력 약화를 초래했습니다."},
                {level: "high", q: "팔만대장경의 완성이 보여주는 고려의 상황은?", opts: ["국력 강화", "종교적 신앙의 절정과 국난 극복의 의지", "중국의 종속", "경제적 풍요"], ans: 1, exp: "팔만대장경은 신앙의 절정과 국난 극복의 의지를 보여줍니다."},
                {level: "elementary", q: "고려가 멸망한 연도는?", opts: ["1385년", "1392년", "1910년", "1945년"], ans: 1, exp: "고려는 1392년에 조선에 의해 멸망했습니다."}
            ]
        },
        joseon: {
            name: "조선",
            emoji: "📖",
            color: "linear-gradient(135deg, #FF6347 0%, #FF8C00 100%)",
            description: "조선은 이성계가 건국한 나라로, 약 500년간 한반도를 통치했습니다. 조선의 가장 큰 문화 유산은 한글입니다. 세종대왕이 창제한 한글은 과학적 원리에 기초한 세계 최고의 문자 체계로 평가받고 있습니다.",
            highlights: [
                "이성계가 1392년 건국",
                "한글 창제: 세종대왕, 1443년 (훈민정음)",
                "한글의 과학적 원리: 음성학 기반 설계",
                "측우기: 한국 과학 발전의 상징",
                "신분제: 양반, 중인, 상민, 노비"
            ],
            questions: [
                {level: "elementary", q: "조선을 건국한 왕은?", opts: ["세종대왕", "이성계", "태종", "정종"], ans: 1, exp: "조선은 이성계가 건국했습니다."},
                {level: "elementary", q: "조선이 건국된 연도는?", opts: ["1368년", "1385년", "1392년", "1400년"], ans: 2, exp: "조선은 1392년에 건국되었습니다."},
                {level: "elementary", q: "한글의 기본 글자는 몇 개인가?", opts: ["8개", "10개", "14개", "24개"], ans: 2, exp: "한글의 기본 글자는 14개(자음 14, 모음 10)입니다."},
                {level: "elementary", q: "한글이 만들어진 연도는?", opts: ["1424년", "1443년", "1456년", "1500년"], ans: 1, exp: "한글은 1443년(세종 25년)에 만들어졌습니다."},
                {level: "elementary", q: "한글의 창제자는?", opts: ["이성계", "세종대왕", "세조", "성종"], ans: 1, exp: "한글은 세종대왕이 창제했습니다."},
                {level: "middle", q: "한글이 만들어진 목적은?", opts: ["중국을 따라", "모든 백성이 쉽게 배우고 쓰기 위함", "법률용", "종교용"], ans: 1, exp: "세종대왕은 모든 백성이 글을 쉽게 배우도록 하기 위해 한글을 만들었습니다."},
                {level: "middle", q: "한글의 이름 '훈민정음'의 뜻은?", opts: ["한글", "백성의 바른 소리", "국민의 글", "올바른 글자"], ans: 1, exp: "'훈민정음'은 '백성을 가르치는 올바른 소리'라는 뜻입니다."},
                {level: "high", q: "한글의 가장 과학적인 특징은?", opts: ["크기가 크다", "소리를 음성학 원리에 따라 체계적으로 표현", "색깔이 다양하다", "발음이 쉽다"], ans: 1, exp: "한글은 입의 모양을 기반으로 한 음성학적 원리에 따라 설계되었습니다."},
                {level: "high", q: "한글 창제가 세계 역사에서 가지는 의의는?", opts: ["가장 아름다운 글자", "가장 배우기 쉬운 글자", "과학적 원리에 기초한 최초의 음성 문자", "가장 실용적인 글자"], ans: 2, exp: "한글은 과학적 원리에 기초한 최초의 음성 문자입니다."},
                {level: "elementary", q: "조선의 정치 체제는?", opts: ["귀족 중심", "왕권 중심", "신권 중심", "군권 중심"], ans: 1, exp: "조선은 왕권 중심의 체제를 가지고 있었습니다."},
                {level: "elementary", q: "조선이 채택한 통치 철학은?", opts: ["도교", "불교", "유교", "신교"], ans: 2, exp: "조선은 신유학(주자학)을 통치 철학으로 채택했습니다."},
                {level: "middle", q: "세종대왕의 시대를 조선의 가장 좋은 시대로 평가하는 이유는?", opts: ["땅이 넓었음", "정치적 안정과 문화 발전", "인구가 많았음", "부자가 많았음"], ans: 1, exp: "세종 시대는 정치적 안정과 문화 발전으로 조선의 최고 시대로 평가됩니다."},
                {level: "middle", q: "조선의 신분제는?", opts: ["2계급", "3계급", "4계급", "5계급"], ans: 3, exp: "조선의 신분제는 양반, 중인, 상민, 노비의 4계급으로 이루어졌습니다."},
                {level: "middle", q: "양반이란 누구인가?", opts: ["상인", "장인", "지식인 계층", "농부"], ans: 2, exp: "양반은 학문과 도덕을 갖춘 지식인 계층입니다."},
                {level: "high", q: "조선이 유교를 국교로 삼은 목적은?", opts: ["외국 침략 방지", "사회 질서 유지와 민족정신 강화", "경제 발전", "과학 발전"], ans: 1, exp: "조선이 유교를 국교로 삼은 목적은 사회 질서 유지와 민족정신 강화입니다."},
                {level: "high", q: "한글 창제가 조선 사회에 미친 가장 중요한 영향은?", opts: ["정치 변화", "문화 민주화와 교육 혁명", "경제 발전", "외교 개선"], ans: 1, exp: "한글 창제는 문화 민주화와 교육 혁명을 가져왔습니다."},
                {level: "elementary", q: "조선의 과학 발전을 대표하는 유물은?", opts: ["청자", "팔만대장경", "측우기", "석굴암"], ans: 2, exp: "조선의 과학 발전을 대표하는 유물은 측우기입니다."},
                {level: "middle", q: "측우기가 개발된 이유는?", opts: ["농업 발전", "강우량 측정과 농사 기술 개선", "과학 연구", "외국 선물"], ans: 1, exp: "측우기는 강우량을 측정하여 농사 기술을 개선하기 위해 만들어졌습니다."},
                {level: "high", q: "조선의 과학 발전이 중국의 과학과 다른 점은?", opts: ["더 발전했다", "실용성을 강조했다", "이론만 강조했다", "비과학적이었다"], ans: 1, exp: "조선의 과학은 측우기, 한글 등에서 보듯이 실용성을 강조했습니다."}
            ]
        },
        geunhyundae: {
            name: "근현대",
            emoji: "🚀",
            color: "linear-gradient(135deg, #1E90FF 0%, #00CED1 100%)",
            description: "근현대는 한국이 일제강점기를 거쳐 독립을 이루고 대한민국을 건설한 격동의 시대입니다. 3·1 운동, 항일운동, 그리고 대한민국 수립까지의 역사는 우리 민족의 자주정신과 저항 정신을 보여주는 귀중한 유산입니다.",
            highlights: [
                "을사조약 (1905년): 외교권 박탈",
                "경술국치 (1910년): 일제강점기 시작 (36년간)",
                "3·1 운동 (1919년): 약 200만 명 참여",
                "임시정부 수립: 상하이",
                "대한민국 수립 (1948년): 이승만 초대 대통령"
            ],
            questions: [
                {level: "elementary", q: "3·1 운동이 일어난 연도는?", opts: ["1910년", "1919년", "1945년", "1948년"], ans: 1, exp: "3·1 운동은 1919년 3월 1일에 일어났습니다."},
                {level: "elementary", q: "일제강점기는 몇 년 동안 지속되었나?", opts: ["20년", "36년", "50년", "60년"], ans: 1, exp: "일제강점기는 1910년부터 1945년까지 36년간 지속되었습니다."},
                {level: "elementary", q: "일제강점기는 언제부터 시작되었나?", opts: ["1905년", "1910년", "1915년", "1920년"], ans: 1, exp: "일제강점기는 1910년 경술국치로 시작되었습니다."},
                {level: "elementary", q: "일제강점기는 언제 끝났나?", opts: ["1940년", "1943년", "1945년", "1950년"], ans: 2, exp: "일제강점기는 1945년 일본의 항복으로 끝났습니다."},
                {level: "elementary", q: "3·1 운동의 의미는?", opts: ["경제 운동", "문화 운동", "독립 운동", "종교 운동"], ans: 2, exp: "3·1 운동은 한국의 독립을 위한 운동입니다."},
                {level: "middle", q: "3·1 운동에 참여한 사람의 수는?", opts: ["약 50만 명", "약 100만 명", "약 200만 명", "약 500만 명"], ans: 2, exp: "3·1 운동에 약 200만 명이 참여했습니다."},
                {level: "middle", q: "3·1 운동 중 가장 유명한 선언은?", opts: ["독립선언서", "임시정부 선언", "항일 성명", "국민 선언"], ans: 0, exp: "3·1 운동의 가장 유명한 선언은 독립선언서입니다."},
                {level: "high", q: "3·1 운동의 역사적 의의를 가장 포괄적으로 설명한 것은?", opts: ["일시적 저항", "국내 저항과 국제 사회에 한국 독립 의지 표현", "실패한 운동", "경제 운동"], ans: 1, exp: "3·1 운동은 한국의 독립 의지를 국내외에 알린 중요한 운동입니다."},
                {level: "high", q: "3·1 운동이 국제사회에 미친 영향은?", opts: ["무영향", "국제연맹 제소", "베르사유 조약 영향", "한국 독립국 인정"], ans: 1, exp: "3·1 운동 이후 한국은 국제연맹에 독립을 청원했습니다."},
                {level: "elementary", q: "1919년 3·1 운동 이후 임시정부가 세워진 곳은?", opts: ["한국", "중국 상하이", "미국", "일본"], ans: 1, exp: "임시정부는 중국 상하이에 세워졌습니다."},
                {level: "middle", q: "일제강점기 동안 한국의 항일운동의 주요 형태는?", opts: ["무장투쟁만", "독립운동과 문화운동", "협력만", "항의만"], ans: 1, exp: "일제강점기 동안 한국은 무장투쟁과 문화운동 모두를 전개했습니다."},
                {level: "middle", q: "안창호는 어떤 독립운동가인가?", opts: ["무장투쟁", "교육 운동과 실력양성", "정치 활동", "종교 활동"], ans: 1, exp: "안창호는 교육 운동과 실력양성을 통해 독립을 추구한 지도자입니다."},
                {level: "high", q: "을사조약 이후 한국의 항일운동이 본격화된 이유는?", opts: ["경제적 이유", "민족적 자존심 상실로 인한 저항", "종교적 이유", "외국의 강요"], ans: 1, exp: "을사조약 이후 한국은 민족적 자존심 상실로 항일운동을 본격화했습니다."},
                {level: "high", q: "일제강점기 동안 한국 문화가 유지될 수 있었던 이유는?", opts: ["일본의 허용", "한국인의 저항 정신과 문화 보존 노력", "국제사회의 지원", "무관심"], ans: 1, exp: "한국 문화는 한국인의 저항 정신과 문화 보존 노력으로 유지되었습니다."},
                {level: "elementary", q: "대한민국이 수립된 연도는?", opts: ["1945년", "1946년", "1948년", "1950년"], ans: 2, exp: "대한민국은 1948년 8월 15일에 수립되었습니다."},
                {level: "elementary", q: "대한민국의 초대 대통령은?", opts: ["이순신", "안창호", "이승만", "김구"], ans: 2, exp: "대한민국의 초대 대통령은 이승만입니다."},
                {level: "middle", q: "해방 이후 한국 분단의 원인은?", opts: ["자발적 선택", "미소 냉전과 국제 관계", "경제적 이유", "문화적 차이"], ans: 1, exp: "한국 분단은 미소 냉전과 국제 관계로 인한 것입니다."},
                {level: "high", q: "한국 독립운동의 가장 중요한 특징은?", opts: ["폭력적", "비폭력 저항과 다양한 형태의 투쟁", "소극적", "실패한"], ans: 1, exp: "한국 독립운동은 비폭력 저항과 무장투쟁, 문화운동 등 다양한 형태를 포함했습니다."},
                {level: "high", q: "일제강점기가 한국 사회에 미친 영향을 평가할 때 가장 중요한 것은?", opts: ["긍정적 영향만", "민족의식의 각성과 자주정신의 고양", "부정적 영향만", "영향 없음"], ans: 1, exp: "일제강점기는 한국인의 민족의식을 각성시키고 자주정신을 고양시켰습니다."}
            ]
        }
    };

    // URL에서 시대 파라미터 가져오기
    const urlParams = new URLSearchParams(window.location.search);
    const selectedEra = urlParams.get('era') || 'sonsahui';
    let currentEraData = eraData[selectedEra];

    if (!currentEraData) {
        alert('시대 정보를 찾을 수 없습니다.');
        window.location.href = '/index.html';
    }

    let currentQuestionIndex = 0;
    let eraProgress = JSON.parse(localStorage.getItem(`janeProgress-${selectedEra}`) || '{"correct": 0, "total": 0, "history": []}');

    // ========== 화면 업데이트 ==========
    function updateDisplay() {
        document.getElementById('nav-title').textContent = currentEraData.name;
        
        const headerElem = document.getElementById('background-emoji');
        headerElem.textContent = currentEraData.emoji;
        headerElem.style.background = currentEraData.color;

        document.getElementById('background-title').textContent = currentEraData.name;
        document.getElementById('background-desc').textContent = currentEraData.description;
        
        const highlightList = document.getElementById('highlight-list');
        highlightList.innerHTML = currentEraData.highlights.map(h => `<li>${h}</li>`).join('');

        updateProgressBar();
        renderQuestion();
    }

    function updateProgressBar() {
        const total = currentEraData.questions.length;
        const completed = currentQuestionIndex;
        const percentage = (completed / total) * 100;
        
        document.getElementById('progress-bar').style.width = percentage + '%';
        document.getElementById('progress-text').textContent = `${completed}/${total}`;
    }

    function renderQuestion() {
        if (currentQuestionIndex >= currentEraData.questions.length) {
            showCompletion();
            return;
        }

        document.getElementById('background-section').style.display = 'block';
        document.getElementById('quiz-section').classList.add('show');
        document.getElementById('completion-screen').classList.remove('show');

        const q = currentEraData.questions[currentQuestionIndex];
        
        document.getElementById('quiz-number').textContent = `문제 ${currentQuestionIndex + 1}/${currentEraData.questions.length}`;
        
        const levelMap = { elementary: "초등", middle: "중학", high: "고등" };
        const badge = document.getElementById('difficulty-badge');
        badge.textContent = levelMap[q.level];
        badge.className = `difficulty-badge difficulty-${q.level}`;
        
        document.getElementById('question-text').textContent = q.q;
        
        const optionsGrid = document.getElementById('options-grid');
        optionsGrid.innerHTML = '';
        q.opts.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.textContent = opt;
            btn.onclick = () => answerQuestion(idx, q);
            optionsGrid.appendChild(btn);
        });

        document.getElementById('feedback-section').classList.remove('show');
        document.getElementById('next-btn').classList.remove('show');
        document.getElementById('complete-btn').classList.remove('show');
        updateProgressBar();
    }

    function answerQuestion(selectedIdx, question) {
        const isCorrect = selectedIdx === question.ans;
        const optButtons = document.querySelectorAll('.option-btn');
        
        optButtons.forEach((btn, idx) => {
            btn.disabled = true;
            if (idx === question.ans) {
                btn.classList.add('correct');
            } else if (idx === selectedIdx && !isCorrect) {
                btn.classList.add('incorrect');
            }
        });

        eraProgress.total++;
        if (isCorrect) eraProgress.correct++;
        eraProgress.history.push(isCorrect ? 100 : 0);

        const feedback = document.getElementById('feedback-section');
        feedback.classList.add('show');
        
        if (isCorrect) {
            feedback.className = 'feedback-section show correct';
            document.getElementById('feedback-title').textContent = '✅ 정답입니다! 완벽해요!';
        } else {
            feedback.className = 'feedback-section show incorrect';
            document.getElementById('feedback-title').textContent = '❌ 아쉬워요! 다시 한번 생각해보세요.';
            document.getElementById('correct-answer').style.display = 'block';
            document.getElementById('correct-answer').textContent = `정답: ${question.opts[question.ans]}`;
        }
        
        document.getElementById('feedback-explanation').textContent = question.exp;

        setTimeout(() => {
            if (currentQuestionIndex < currentEraData.questions.length - 1) {
                document.getElementById('next-btn').classList.add('show');
            } else {
                document.getElementById('complete-btn').classList.add('show');
            }
        }, 400);
    }

    function nextQuestion() {
        currentQuestionIndex++;
        localStorage.setItem(`janeProgress-${selectedEra}`, JSON.stringify(eraProgress));
        renderQuestion();
    }

    function goHome() {
        const mainProgress = JSON.parse(localStorage.getItem('janeProgress') || '{}');
        mainProgress[selectedEra] = {
            correct: eraProgress.correct,
            total: eraProgress.total,
            completed: currentQuestionIndex >= currentEraData.questions.length
        };
        localStorage.setItem('janeProgress', JSON.stringify(mainProgress));
        window.location.href = '/index.html';
    }

    function resetEra() {
        if (confirm(`정말 ${currentEraData.name} 학습을 초기화할까요?`)) {
            localStorage.removeItem(`janeProgress-${selectedEra}`);
            currentQuestionIndex = 0;
            eraProgress = { correct: 0, total: 0, history: [] };
            renderQuestion();
        }
    }

    function showCompletion() {
        document.getElementById('background-section').style.display = 'none';
        document.getElementById('quiz-section').classList.remove('show');
        document.getElementById('completion-screen').classList.add('show');

        const accuracy = Math.round((eraProgress.correct / eraProgress.total) * 100);
        document.getElementById('completion-score').textContent = `${eraProgress.correct}/${currentEraData.questions.length} (${accuracy}%)`;

        let message = '';
        if (accuracy >= 90) message = `🏆 완벽합니다! ${currentEraData.name} 마스터!`;
        else if (accuracy >= 80) message = `💪 정말 잘했어요! 다음 시대를 배워보세요!`;
        else if (accuracy >= 70) message = `📚 좋습니다! 한 번 더 복습하면 완벽해질 거예요!`;
        else message = `🚀 계속 학습해봅시다! 더 해내실 수 있어요!`;
        
        document.getElementById('completion-message').textContent = message;

        // 차트 표시
        document.getElementById('chart-container').style.display = 'block';
        const ctx = document.getElementById('growthChart').getContext('2d');
        
        // 기존 차트 destroy
        if (window.myChart) window.myChart.destroy();
        
        window.myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: eraProgress.history.map((_, i) => `${i+1}`),
                datasets: [{
                    label: '정답률 추이',
                    data: eraProgress.history,
                    borderColor: '#e67e22',
                    backgroundColor: 'rgba(230, 126, 34, 0.1)',
                    tension: 0.4,
                    fill: true,
                    pointRadius: 4,
                    pointBackgroundColor: '#e67e22'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: true }
                },
                scales: {
                    y: { beginAtZero: true, max: 100 }
                }
            }
        });
    }

    // ========== 초기화 ==========
    updateDisplay();
</script>

</body>
</html>
